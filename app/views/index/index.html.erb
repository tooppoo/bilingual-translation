<div class="h-screen">
  <header class="h-1/6 flex flex-row items-center p-3">
    <button
      id="translate"
      type="button"
      class="w-32 h-8 border-2"
    >
      翻訳
    </button>
  </header>
  <article class="flex flex-row h-5/6 p-3">
    <section
      name="source-text"
      class="flex-1 flex flex-col pr-2.5"
    >
      <label
        for="source-text"
        class="text-2xl"
      >
        原文
      </label>
      <textarea
        id="source-text"
        class="h-screen border-2"
      ></textarea>
    </section>
    <section
      name="target-text"
      class="flex-1 flex flex-col pl-2.5"
    >
      <label
        for="target-text"
        class="text-2xl"
      >
        訳文
      </label>
      <textarea
        id="target-text"
        class="h-screen border-2"
      ></textarea>
    </section>
  </article>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>
  const target = $("#target-text")
  $("#translate").click(() => {
      const source = $("#source-text").val()
      const text = source.split(/\n{2,}/)
      const csrfToken = $("[name=csrf-token]").attr('content')

      const data = {
          text,
          language: {
              from: 'en',
              to: 'ja',
          },
          authenticity_token: csrfToken,
      }

      $.ajax({
          url: '/api/translation',
          type: 'POST',
          dataType: 'json',
          data,
      }).done((res) => {
          console.log({ res })

          target.val(res.translated.body)
      }).fail((request, status, error) => {
          console.error({ request, status, error })
      })
  })
</script>
